from dollarpy import Recognizer, Template, Point
Left_Hand_Up = Template('Left_Hand_Up', [
Point(105,425, 1),
Point(306,439, 1),
Point(104,425, 1),
Point(307,438, 1),
Point(98,424, 1),
Point(308,438, 1),
Point(101,427, 1),
Point(308,439, 1),
Point(100,426, 1),
Point(308,439, 1),
Point(100,426, 1),
Point(308,438, 1),
Point(100,426, 1),
Point(308,438, 1),
Point(101,426, 1),
Point(309,438, 1),
Point(101,427, 1),
Point(318,438, 1),
Point(101,427, 1),
Point(317,438, 1),
Point(101,429, 1),
Point(319,438, 1),
Point(105,433, 1),
Point(319,438, 1),
Point(106,435, 1),
Point(323,439, 1),
Point(107,436, 1),
Point(330,439, 1),
Point(109,439, 1),
Point(334,439, 1),
Point(109,443, 1),
Point(333,311, 1),
Point(109,444, 1),
Point(330,276, 1),
Point(109,446, 1),
Point(327,244, 1),
Point(107,446, 1),
Point(326,219, 1),
Point(106,445, 1),
Point(326,187, 1),
Point(105,445, 1),
Point(327,172, 1),
Point(105,445, 1),
Point(328,157, 1),
Point(102,441, 1),
Point(328,142, 1),
Point(101,442, 1),
Point(328,133, 1),
Point(101,445, 1),
Point(329,127, 1),
Point(97,444, 1),
Point(330,119, 1),
Point(95,444, 1),
Point(330,118, 1),
Point(95,445, 1),
Point(330,114, 1),
Point(93,446, 1),
Point(331,115, 1),
Point(91,446, 1),
Point(332,111, 1),
Point(92,451, 1),
Point(332,111, 1),
Point(92,450, 1),
Point(334,111, 1),
Point(92,450, 1),
Point(336,111, 1),
Point(92,453, 1),
Point(337,110, 1),
Point(91,452, 1),
Point(337,110, 1),
Point(90,450, 1),
Point(339,111, 1),
Point(88,449, 1),
Point(340,113, 1),
Point(88,449, 1),
Point(340,114, 1),
Point(87,444, 1),
Point(341,114, 1),
Point(87,444, 1),
Point(341,115, 1),
Point(87,443, 1),
Point(342,115, 1),
Point(85,443, 1),
Point(342,116, 1),
])
Right_Hand_UP = Template('Right_Hand_UP', [
Point(72,443, 1),
Point(334,477, 1),
Point(73,428, 1),
Point(328,467, 1),
Point(81,411, 1),
Point(323,459, 1),
Point(92,314, 1),
Point(324,448, 1),
Point(94,270, 1),
Point(333,455, 1),
Point(94,239, 1),
Point(333,458, 1),
Point(95,204, 1),
Point(332,459, 1),
Point(95,177, 1),
Point(325,459, 1),
Point(96,155, 1),
Point(322,460, 1),
Point(96,140, 1),
Point(318,460, 1),
Point(96,133, 1),
Point(318,461, 1),
Point(96,128, 1),
Point(318,461, 1),
Point(96,125, 1),
Point(319,462, 1),
Point(96,123, 1),
Point(319,462, 1),
Point(96,123, 1),
Point(319,462, 1),
Point(96,122, 1),
Point(319,462, 1),
Point(96,122, 1),
Point(319,462, 1),
Point(96,119, 1),
Point(320,463, 1),
Point(96,118, 1),
Point(320,462, 1),
Point(96,118, 1),
Point(320,462, 1),
Point(96,118, 1),
Point(321,462, 1),
Point(96,116, 1),
Point(321,462, 1),
Point(96,116, 1),
Point(321,463, 1),
Point(96,116, 1),
Point(321,463, 1),
Point(96,118, 1),
Point(321,463, 1),
Point(96,119, 1),
Point(324,463, 1),
Point(95,120, 1),
Point(324,464, 1),
Point(94,120, 1),
Point(326,464, 1),
Point(93,123, 1),
Point(326,465, 1),
])







from dollarpy import Recognizer, Template, Point
DOWN = Template('DOWN', [
Point(63,255, 1),
Point(83,268, 1),
Point(106,276, 1),
Point(120,285, 1),
Point(129,291, 1),
Point(110,229, 1),
Point(109,249, 1),
Point(103,258, 1),
Point(102,257, 1),
Point(92,217, 1),
Point(87,248, 1),
Point(80,262, 1),
Point(79,262, 1),
Point(72,214, 1),
Point(65,246, 1),
Point(61,260, 1),
Point(63,259, 1),
Point(53,213, 1),
Point(45,239, 1),
Point(42,252, 1),
Point(44,253, 1),
Point(53,252, 1),
Point(75,261, 1),
Point(99,267, 1),
Point(117,272, 1),
Point(128,272, 1),
Point(115,210, 1),
Point(106,230, 1),
Point(99,242, 1),
Point(101,240, 1),
Point(97,197, 1),
Point(88,222, 1),
Point(82,239, 1),
Point(84,234, 1),
Point(77,191, 1),
Point(67,217, 1),
Point(63,233, 1),
Point(67,229, 1),
Point(56,189, 1),
Point(48,209, 1),
Point(46,224, 1),
Point(48,224, 1),
Point(51,230, 1),
Point(75,239, 1),
Point(101,247, 1),
Point(119,255, 1),
Point(132,258, 1),
Point(116,194, 1),
Point(108,203, 1),
Point(98,216, 1),
Point(99,218, 1),
Point(99,179, 1),
Point(90,194, 1),
Point(81,211, 1),
Point(82,212, 1),
Point(80,170, 1),
Point(71,187, 1),
Point(64,205, 1),
Point(66,206, 1),
Point(60,164, 1),
Point(54,177, 1),
Point(49,193, 1),
Point(50,197, 1),
Point(51,204, 1),
Point(68,215, 1),
Point(91,224, 1),
Point(106,236, 1),
Point(118,249, 1),
Point(119,171, 1),
Point(108,186, 1),
Point(95,197, 1),
Point(96,194, 1),
Point(105,155, 1),
Point(95,173, 1),
Point(82,189, 1),
Point(84,187, 1),
Point(86,145, 1),
Point(76,164, 1),
Point(67,182, 1),
Point(68,182, 1),
Point(67,140, 1),
Point(58,155, 1),
Point(52,171, 1),
Point(54,174, 1),
Point(51,192, 1),
Point(74,200, 1),
Point(97,209, 1),
Point(111,225, 1),
Point(120,241, 1),
Point(117,157, 1),
Point(110,165, 1),
Point(99,176, 1),
Point(101,175, 1),
Point(102,141, 1),
Point(95,152, 1),
Point(84,169, 1),
Point(86,167, 1),
Point(83,131, 1),
Point(77,142, 1),
Point(69,160, 1),
Point(72,160, 1),
Point(65,126, 1),
Point(61,132, 1),
Point(55,148, 1),
Point(55,151, 1),
Point(51,177, 1),
Point(72,186, 1),
Point(94,196, 1),
Point(109,211, 1),
Point(119,225, 1),
Point(119,144, 1),
Point(110,148, 1),
Point(98,160, 1),
Point(102,160, 1),
Point(104,129, 1),
Point(97,135, 1),
Point(85,153, 1),
Point(89,153, 1),
Point(87,118, 1),
Point(80,124, 1),
Point(71,143, 1),
Point(75,144, 1),
Point(69,111, 1),
Point(65,113, 1),
Point(58,129, 1),
Point(59,133, 1),
Point(52,162, 1),
Point(74,172, 1),
Point(96,182, 1),
Point(109,196, 1),
Point(118,212, 1),
Point(121,133, 1),
Point(113,136, 1),
Point(100,147, 1),
Point(103,149, 1),
Point(107,116, 1),
Point(99,122, 1),
Point(86,140, 1),
Point(90,140, 1),
Point(90,105, 1),
Point(83,110, 1),
Point(73,129, 1),
Point(77,132, 1),
Point(73,98, 1),
Point(69,99, 1),
Point(62,114, 1),
Point(63,118, 1),
Point(56,151, 1),
Point(77,160, 1),
Point(100,170, 1),
Point(112,185, 1),
Point(118,202, 1),
Point(124,122, 1),
Point(115,124, 1),
Point(102,136, 1),
Point(105,138, 1),
Point(110,105, 1),
Point(102,109, 1),
Point(89,127, 1),
Point(93,128, 1),
Point(93,94, 1),
Point(86,97, 1),
Point(76,117, 1),
Point(80,120, 1),
Point(76,87, 1),
Point(71,88, 1),
Point(65,104, 1),
Point(67,108, 1),
Point(59,143, 1),
Point(80,152, 1),
Point(101,162, 1),
Point(114,176, 1),
Point(121,193, 1),
Point(127,115, 1),
Point(119,115, 1),
Point(106,128, 1),
Point(108,130, 1),
Point(114,97, 1),
Point(106,100, 1),
Point(92,118, 1),
Point(96,120, 1),
Point(97,86, 1),
Point(91,87, 1),
Point(80,107, 1),
Point(84,111, 1),
Point(79,79, 1),
Point(73,80, 1),
Point(68,96, 1),
Point(71,101, 1),
Point(63,134, 1),
Point(84,145, 1),
Point(105,155, 1),
Point(117,171, 1),
Point(123,187, 1),
Point(128,112, 1),
Point(122,109, 1),
Point(109,120, 1),
Point(111,124, 1),
Point(116,94, 1),
Point(109,93, 1),
Point(95,111, 1),
Point(99,113, 1),
Point(101,81, 1),
Point(95,79, 1),
Point(83,98, 1),
Point(88,103, 1),
Point(84,74, 1),
Point(79,70, 1),
Point(72,86, 1),
Point(74,92, 1),
Point(67,127, 1),
Point(86,138, 1),
Point(108,149, 1),
Point(120,164, 1),
Point(128,181, 1),
Point(131,106, 1),
Point(126,103, 1),
Point(113,115, 1),
Point(116,119, 1),
Point(120,88, 1),
Point(113,87, 1),
Point(99,105, 1),
Point(104,108, 1),
Point(105,76, 1),
Point(99,74, 1),
Point(88,92, 1),
Point(93,97, 1),
Point(89,68, 1),
Point(83,65, 1),
Point(76,80, 1),
Point(79,86, 1),
Point(71,122, 1),
Point(90,133, 1),
Point(110,144, 1),
Point(122,159, 1),
Point(129,176, 1),
Point(135,103, 1),
Point(130,98, 1),
Point(116,110, 1),
Point(119,114, 1),
Point(124,85, 1),
Point(118,83, 1),
Point(104,99, 1),
Point(107,103, 1),
Point(110,72, 1),
Point(104,69, 1),
Point(92,87, 1),
Point(97,92, 1),
Point(94,63, 1),
Point(87,60, 1),
Point(81,74, 1),
Point(84,80, 1),
Point(71,118, 1),
Point(91,130, 1),
Point(113,140, 1),
Point(125,156, 1),
Point(131,173, 1),
Point(137,100, 1),
Point(133,94, 1),
Point(119,106, 1),
Point(122,110, 1),
Point(127,83, 1),
Point(120,79, 1),
Point(106,97, 1),
Point(110,101, 1),
Point(113,70, 1),
Point(107,65, 1),
Point(95,84, 1),
Point(100,90, 1),
Point(97,61, 1),
Point(91,56, 1),
Point(83,71, 1),
Point(87,78, 1),
Point(75,115, 1),
Point(94,126, 1),
Point(114,138, 1),
Point(126,153, 1),
Point(133,171, 1),
Point(141,98, 1),
Point(135,92, 1),
Point(121,103, 1),
Point(125,108, 1),
Point(131,80, 1),
Point(123,77, 1),
Point(109,93, 1),
Point(114,97, 1),
Point(117,67, 1),
Point(111,62, 1),
Point(99,81, 1),
Point(104,86, 1),
Point(102,58, 1),
Point(95,53, 1),
Point(88,67, 1),
Point(91,74, 1),
Point(77,112, 1),
Point(95,124, 1),
Point(116,136, 1),
Point(128,152, 1),
Point(135,168, 1),
Point(143,95, 1),
Point(136,90, 1),
Point(123,102, 1),
Point(128,105, 1),
Point(133,78, 1),
Point(124,75, 1),
Point(110,92, 1),
Point(116,95, 1),
Point(119,65, 1),
Point(113,61, 1),
Point(100,79, 1),
Point(106,85, 1),
Point(104,56, 1),
Point(97,51, 1),
Point(90,66, 1),
Point(94,73, 1),
Point(79,110, 1),
Point(97,123, 1),
Point(118,135, 1),
Point(130,151, 1),
Point(137,168, 1),
Point(145,94, 1),
Point(138,89, 1),
Point(125,100, 1),
Point(130,104, 1),
Point(135,77, 1),
Point(126,74, 1),
Point(112,90, 1),
Point(118,94, 1),
Point(121,64, 1),
Point(114,59, 1),
Point(102,77, 1),
Point(108,83, 1),
Point(107,55, 1),
Point(100,50, 1),
Point(92,64, 1),
Point(96,72, 1),
Point(80,109, 1),
Point(98,122, 1),
Point(119,134, 1),
Point(131,150, 1),
Point(137,168, 1),
Point(147,93, 1),
Point(139,88, 1),
Point(127,99, 1),
Point(132,103, 1),
Point(137,75, 1),
Point(127,73, 1),
Point(113,89, 1),
Point(120,93, 1),
Point(124,62, 1),
Point(116,58, 1),
Point(104,76, 1),
Point(110,82, 1),
Point(109,53, 1),
Point(102,49, 1),
Point(94,63, 1),
Point(98,70, 1),
Point(82,107, 1),
Point(100,121, 1),
Point(121,134, 1),
Point(133,149, 1),
Point(139,167, 1),
Point(148,93, 1),
Point(141,87, 1),
Point(128,98, 1),
Point(133,103, 1),
Point(138,75, 1),
Point(130,71, 1),
Point(115,88, 1),
Point(121,92, 1),
Point(125,62, 1),
Point(118,57, 1),
Point(105,75, 1),
Point(111,81, 1),
Point(111,53, 1),
Point(103,48, 1),
Point(95,63, 1),
Point(99,70, 1),
Point(82,106, 1),
Point(100,119, 1),
Point(121,132, 1),
Point(133,148, 1),
Point(139,166, 1),
Point(149,92, 1),
Point(142,85, 1),
Point(128,97, 1),
Point(133,101, 1),
Point(139,74, 1),
Point(130,70, 1),
Point(116,87, 1),
Point(121,91, 1),
Point(125,61, 1),
Point(118,56, 1),
Point(106,73, 1),
Point(111,80, 1),
Point(111,51, 1),
Point(104,47, 1),
Point(96,62, 1),
Point(100,69, 1),
Point(83,105, 1),
Point(100,118, 1),
Point(122,131, 1),
Point(133,147, 1),
Point(139,166, 1),
Point(149,91, 1),
Point(142,84, 1),
Point(129,96, 1),
Point(133,100, 1),
Point(139,73, 1),
Point(131,69, 1),
Point(116,86, 1),
Point(122,90, 1),
Point(126,60, 1),
Point(119,54, 1),
Point(106,72, 1),
Point(112,79, 1),
Point(112,50, 1),
Point(105,46, 1),
Point(96,61, 1),
Point(100,68, 1),
Point(85,104, 1),
Point(102,118, 1),
Point(123,131, 1),
Point(134,147, 1),
Point(139,165, 1),
Point(149,91, 1),
Point(142,85, 1),
Point(129,96, 1),
Point(134,101, 1),
Point(140,73, 1),
Point(131,70, 1),
Point(117,86, 1),
Point(122,91, 1),
Point(126,60, 1),
Point(120,55, 1),
Point(107,73, 1),
Point(112,80, 1),
Point(112,51, 1),
Point(106,46, 1),
Point(97,60, 1),
Point(101,68, 1),
Point(85,106, 1),
Point(101,120, 1),
Point(122,133, 1),
Point(134,148, 1),
Point(139,166, 1),
Point(150,93, 1),
Point(142,86, 1),
Point(129,97, 1),
Point(133,102, 1),
Point(140,74, 1),
Point(132,70, 1),
Point(117,87, 1),
Point(122,91, 1),
Point(126,60, 1),
Point(120,55, 1),
Point(107,72, 1),
Point(112,79, 1),
Point(112,50, 1),
Point(105,46, 1),
Point(97,60, 1),
Point(101,66, 1),
Point(84,108, 1),
Point(100,121, 1),
Point(121,134, 1),
Point(133,150, 1),
Point(139,168, 1),
Point(151,93, 1),
Point(141,86, 1),
Point(128,98, 1),
Point(133,103, 1),
Point(141,74, 1),
Point(130,72, 1),
Point(116,88, 1),
Point(122,92, 1),
Point(128,61, 1),
Point(119,57, 1),
Point(107,74, 1),
Point(112,81, 1),
Point(113,52, 1),
Point(106,47, 1),
Point(98,61, 1),
Point(101,68, 1),
Point(83,109, 1),
Point(99,123, 1),
Point(120,135, 1),
Point(132,151, 1),
Point(138,169, 1),
Point(149,95, 1),
Point(141,87, 1),
Point(128,99, 1),
Point(133,104, 1),
Point(140,76, 1),
Point(130,72, 1),
Point(116,88, 1),
Point(122,93, 1),
Point(126,62, 1),
Point(119,57, 1),
Point(106,74, 1),
Point(111,81, 1),
Point(112,52, 1),
Point(105,48, 1),
Point(96,62, 1),
Point(100,68, 1),
Point(82,108, 1),
Point(98,123, 1),
Point(118,136, 1),
Point(131,152, 1),
Point(139,170, 1),
Point(149,95, 1),
Point(140,88, 1),
Point(127,100, 1),
Point(131,105, 1),
Point(140,76, 1),
Point(129,73, 1),
Point(114,89, 1),
Point(120,93, 1),
Point(126,62, 1),
Point(118,57, 1),
Point(104,75, 1),
Point(110,81, 1),
Point(111,52, 1),
Point(104,48, 1),
Point(95,62, 1),
Point(99,69, 1),
Point(81,108, 1),
Point(96,123, 1),
Point(117,135, 1),
Point(130,151, 1),
Point(138,169, 1),
Point(148,94, 1),
Point(139,87, 1),
Point(125,100, 1),
Point(130,105, 1),
Point(139,75, 1),
Point(127,71, 1),
Point(113,88, 1),
Point(118,93, 1),
Point(126,61, 1),
Point(115,56, 1),
Point(103,74, 1),
Point(109,81, 1),
Point(111,50, 1),
Point(103,46, 1),
Point(94,61, 1),
Point(98,69, 1),
Point(82,108, 1),
Point(96,123, 1),
Point(117,136, 1),
Point(129,152, 1),
Point(137,170, 1),
Point(148,94, 1),
Point(137,89, 1),
Point(125,100, 1),
Point(130,104, 1),
Point(139,75, 1),
Point(126,73, 1),
Point(112,89, 1),
Point(118,93, 1),
Point(126,61, 1),
Point(114,58, 1),
Point(102,75, 1),
Point(108,81, 1),
Point(111,50, 1),
Point(102,47, 1),
Point(93,62, 1),
Point(97,69, 1),
Point(80,109, 1),
Point(95,123, 1),
Point(116,136, 1),
Point(128,153, 1),
Point(136,172, 1),
Point(148,94, 1),
Point(136,89, 1),
Point(124,100, 1),
Point(129,103, 1),
Point(139,75, 1),
Point(125,73, 1),
Point(111,90, 1),
Point(118,93, 1),
Point(126,61, 1),
Point(114,58, 1),
Point(101,76, 1),
Point(108,81, 1),
Point(111,50, 1),
Point(101,48, 1),
Point(92,63, 1),
Point(97,69, 1),
Point(79,108, 1),
Point(94,123, 1),
Point(115,137, 1),
Point(127,153, 1),
Point(136,171, 1),
Point(147,94, 1),
Point(135,89, 1),
Point(123,101, 1),
Point(129,105, 1),
Point(139,75, 1),
Point(124,74, 1),
Point(110,91, 1),
Point(117,94, 1),
Point(125,61, 1),
Point(113,58, 1),
Point(100,76, 1),
Point(106,83, 1),
Point(109,51, 1),
Point(99,48, 1),
Point(90,63, 1),
Point(94,71, 1),
])
UP = Template('UP', [
Point(103,299, 1),
Point(109,272, 1),
Point(104,236, 1),
Point(98,210, 1),
Point(94,190, 1),
Point(76,239, 1),
Point(67,232, 1),
Point(81,245, 1),
Point(85,246, 1),
Point(65,257, 1),
Point(60,251, 1),
Point(78,262, 1),
Point(80,263, 1),
Point(58,274, 1),
Point(54,270, 1),
Point(71,280, 1),
Point(75,280, 1),
Point(52,289, 1),
Point(49,288, 1),
Point(62,293, 1),
Point(67,294, 1),
Point(99,289, 1),
Point(105,261, 1),
Point(101,229, 1),
Point(94,205, 1),
Point(91,188, 1),
Point(69,229, 1),
Point(58,222, 1),
Point(75,232, 1),
Point(79,234, 1),
Point(59,246, 1),
Point(51,241, 1),
Point(72,250, 1),
Point(72,250, 1),
Point(52,263, 1),
Point(47,259, 1),
Point(66,267, 1),
Point(68,266, 1),
Point(47,281, 1),
Point(42,279, 1),
Point(57,282, 1),
Point(61,282, 1),
Point(92,276, 1),
Point(95,245, 1),
Point(88,212, 1),
Point(81,188, 1),
Point(80,170, 1),
Point(56,215, 1),
Point(42,207, 1),
Point(61,216, 1),
Point(66,219, 1),
Point(47,233, 1),
Point(38,227, 1),
Point(60,235, 1),
Point(60,235, 1),
Point(42,250, 1),
Point(34,245, 1),
Point(55,251, 1),
Point(56,251, 1),
Point(38,268, 1),
Point(31,264, 1),
Point(46,266, 1),
Point(50,267, 1),
Point(84,267, 1),
Point(91,239, 1),
Point(84,206, 1),
Point(76,181, 1),
Point(75,164, 1),
Point(51,209, 1),
Point(35,200, 1),
Point(54,210, 1),
Point(59,213, 1),
Point(42,226, 1),
Point(32,220, 1),
Point(56,229, 1),
Point(56,228, 1),
Point(37,244, 1),
Point(29,238, 1),
Point(51,244, 1),
Point(52,244, 1),
Point(33,261, 1),
Point(27,258, 1),
Point(43,259, 1),
Point(47,259, 1),
Point(80,261, 1),
Point(86,233, 1),
Point(79,200, 1),
Point(70,175, 1),
Point(69,158, 1),
Point(45,204, 1),
Point(30,196, 1),
Point(50,205, 1),
Point(55,208, 1),
Point(37,221, 1),
Point(27,215, 1),
Point(52,224, 1),
Point(53,224, 1),
Point(33,239, 1),
Point(24,234, 1),
Point(47,240, 1),
Point(50,239, 1),
Point(29,257, 1),
Point(22,254, 1),
Point(40,255, 1),
Point(45,254, 1),
Point(79,256, 1),
Point(84,228, 1),
Point(76,196, 1),
Point(68,171, 1),
Point(67,154, 1),
Point(41,200, 1),
Point(27,191, 1),
Point(46,200, 1),
Point(52,204, 1),
Point(34,217, 1),
Point(23,211, 1),
Point(48,219, 1),
Point(50,219, 1),
Point(29,235, 1),
Point(21,230, 1),
Point(44,235, 1),
Point(46,234, 1),
Point(26,252, 1),
Point(19,249, 1),
Point(37,249, 1),
Point(42,249, 1),
Point(72,245, 1),
Point(80,226, 1),
Point(73,195, 1),
Point(65,170, 1),
Point(63,151, 1),
Point(44,198, 1),
Point(36,191, 1),
Point(40,194, 1),
Point(38,192, 1),
Point(33,214, 1),
Point(25,206, 1),
Point(43,215, 1),
Point(46,214, 1),
Point(27,232, 1),
Point(24,225, 1),
Point(41,231, 1),
Point(45,231, 1),
Point(26,250, 1),
Point(24,244, 1),
Point(36,246, 1),
Point(40,247, 1),
Point(76,249, 1),
Point(81,222, 1),
Point(74,191, 1),
Point(65,166, 1),
Point(64,147, 1),
Point(39,191, 1),
Point(23,184, 1),
Point(42,194, 1),
Point(48,197, 1),
Point(30,209, 1),
Point(19,204, 1),
Point(45,212, 1),
Point(46,211, 1),
Point(25,227, 1),
Point(16,223, 1),
Point(41,229, 1),
Point(43,227, 1),
Point(22,245, 1),
Point(16,243, 1),
Point(35,244, 1),
Point(40,242, 1),
Point(69,239, 1),
Point(77,219, 1),
Point(72,186, 1),
Point(64,162, 1),
Point(61,144, 1),
Point(42,192, 1),
Point(30,184, 1),
Point(37,189, 1),
Point(38,187, 1),
Point(32,209, 1),
Point(20,201, 1),
Point(41,210, 1),
Point(48,210, 1),
Point(28,227, 1),
Point(18,220, 1),
Point(38,226, 1),
Point(46,228, 1),
Point(27,244, 1),
Point(18,239, 1),
Point(33,242, 1),
Point(39,243, 1),
Point(73,245, 1),
Point(79,218, 1),
Point(71,186, 1),
Point(63,161, 1),
Point(62,142, 1),
Point(36,187, 1),
Point(20,178, 1),
Point(39,189, 1),
Point(47,192, 1),
Point(27,204, 1),
Point(16,199, 1),
Point(42,208, 1),
Point(45,206, 1),
Point(22,222, 1),
Point(13,218, 1),
Point(38,223, 1),
Point(42,222, 1),
Point(19,240, 1),
Point(11,237, 1),
Point(31,238, 1),
Point(37,237, 1),
Point(72,243, 1),
Point(78,216, 1),
Point(70,183, 1),
Point(61,158, 1),
Point(61,140, 1),
Point(35,185, 1),
Point(19,177, 1),
Point(39,188, 1),
Point(45,191, 1),
Point(26,202, 1),
Point(14,196, 1),
Point(41,206, 1),
Point(43,205, 1),
Point(21,220, 1),
Point(12,216, 1),
Point(37,221, 1),
Point(40,220, 1),
Point(18,238, 1),
Point(11,235, 1),
Point(30,236, 1),
Point(36,235, 1),
Point(70,241, 1),
Point(77,214, 1),
Point(69,181, 1),
Point(61,156, 1),
Point(60,139, 1),
Point(33,183, 1),
Point(17,174, 1),
Point(36,184, 1),
Point(44,189, 1),
Point(25,201, 1),
Point(13,194, 1),
Point(40,203, 1),
Point(43,203, 1),
Point(19,218, 1),
Point(10,213, 1),
Point(36,219, 1),
Point(39,218, 1),
Point(16,236, 1),
Point(9,232, 1),
Point(29,233, 1),
Point(35,233, 1),
Point(70,238, 1),
Point(76,212, 1),
Point(68,179, 1),
Point(59,154, 1),
Point(60,137, 1),
Point(32,180, 1),
Point(16,172, 1),
Point(36,182, 1),
Point(43,187, 1),
Point(23,198, 1),
Point(12,192, 1),
Point(39,201, 1),
Point(42,201, 1),
Point(18,216, 1),
Point(10,211, 1),
Point(35,217, 1),
Point(39,216, 1),
Point(15,235, 1),
Point(9,230, 1),
Point(28,231, 1),
Point(34,231, 1),
Point(70,236, 1),
Point(76,209, 1),
Point(67,178, 1),
Point(59,153, 1),
Point(59,136, 1),
Point(31,179, 1),
Point(16,169, 1),
Point(35,180, 1),
Point(43,185, 1),
Point(22,196, 1),
Point(12,190, 1),
Point(38,199, 1),
Point(42,199, 1),
Point(18,214, 1),
Point(9,209, 1),
Point(34,214, 1),
Point(38,214, 1),
Point(15,233, 1),
Point(8,228, 1),
Point(27,229, 1),
Point(33,229, 1),
Point(69,234, 1),
Point(75,208, 1),
Point(67,176, 1),
Point(59,151, 1),
Point(59,134, 1),
Point(32,176, 1),
Point(15,167, 1),
Point(33,177, 1),
Point(42,182, 1),
Point(23,194, 1),
Point(12,187, 1),
Point(38,196, 1),
Point(41,196, 1),
Point(18,211, 1),
Point(8,206, 1),
Point(33,212, 1),
Point(38,212, 1),
Point(15,230, 1),
Point(8,225, 1),
Point(27,226, 1),
Point(34,226, 1),
Point(69,232, 1),
Point(74,205, 1),
Point(66,173, 1),
Point(58,149, 1),
Point(59,132, 1),
Point(32,174, 1),
Point(16,165, 1),
Point(35,176, 1),
Point(42,181, 1),
Point(23,192, 1),
Point(11,184, 1),
Point(37,194, 1),
Point(40,195, 1),
Point(17,209, 1),
Point(8,203, 1),
Point(32,210, 1),
Point(36,210, 1),
Point(14,227, 1),
Point(6,222, 1),
Point(25,224, 1),
Point(31,225, 1),
Point(68,229, 1),
Point(74,202, 1),
Point(67,171, 1),
Point(59,147, 1),
Point(59,130, 1),
Point(32,171, 1),
Point(16,162, 1),
Point(34,173, 1),
Point(43,178, 1),
Point(23,189, 1),
Point(12,182, 1),
Point(37,191, 1),
Point(41,191, 1),
Point(18,206, 1),
Point(8,200, 1),
Point(33,206, 1),
Point(37,206, 1),
Point(15,224, 1),
Point(7,219, 1),
Point(27,220, 1),
Point(33,221, 1),
Point(68,227, 1),
Point(74,200, 1),
Point(67,169, 1),
Point(59,145, 1),
Point(59,128, 1),
Point(32,170, 1),
Point(17,160, 1),
Point(36,171, 1),
Point(42,175, 1),
Point(24,187, 1),
Point(12,179, 1),
Point(38,188, 1),
Point(40,188, 1),
Point(19,204, 1),
Point(9,197, 1),
Point(33,204, 1),
Point(37,204, 1),
Point(15,222, 1),
Point(8,217, 1),
Point(27,218, 1),
Point(34,218, 1),
Point(69,225, 1),
Point(74,199, 1),
Point(68,167, 1),
Point(61,143, 1),
Point(61,126, 1),
Point(32,168, 1),
Point(18,158, 1),
Point(36,168, 1),
Point(43,173, 1),
Point(24,185, 1),
Point(13,177, 1),
Point(38,186, 1),
Point(40,187, 1),
Point(18,203, 1),
Point(9,195, 1),
Point(33,202, 1),
Point(37,202, 1),
Point(15,221, 1),
Point(8,214, 1),
Point(27,215, 1),
Point(33,216, 1),
Point(69,224, 1),
Point(75,197, 1),
Point(68,166, 1),
Point(60,142, 1),
Point(60,125, 1),
Point(33,167, 1),
Point(18,156, 1),
Point(36,166, 1),
Point(43,171, 1),
Point(24,184, 1),
Point(13,175, 1),
Point(39,185, 1),
Point(41,186, 1),
Point(19,201, 1),
Point(10,194, 1),
Point(34,200, 1),
Point(37,201, 1),
Point(16,219, 1),
Point(8,213, 1),
Point(27,214, 1),
Point(33,215, 1),
Point(70,223, 1),
Point(76,197, 1),
Point(69,165, 1),
Point(62,141, 1),
Point(61,124, 1),
Point(34,165, 1),
Point(19,155, 1),
Point(36,165, 1),
Point(44,170, 1),
Point(25,182, 1),
Point(14,174, 1),
Point(39,184, 1),
Point(43,184, 1),
Point(19,199, 1),
Point(11,193, 1),
Point(34,199, 1),
Point(38,200, 1),
Point(16,217, 1),
Point(9,211, 1),
Point(28,213, 1),
Point(34,214, 1),
Point(70,222, 1),
Point(76,196, 1),
Point(69,164, 1),
Point(61,140, 1),
Point(62,123, 1),
Point(34,164, 1),
Point(19,154, 1),
Point(38,165, 1),
Point(45,170, 1),
Point(25,182, 1),
Point(15,174, 1),
Point(40,184, 1),
Point(42,184, 1),
Point(20,199, 1),
Point(11,193, 1),
Point(35,199, 1),
Point(38,199, 1),
Point(16,217, 1),
Point(10,211, 1),
Point(28,213, 1),
Point(34,213, 1),
Point(70,222, 1),
Point(76,196, 1),
Point(69,164, 1),
Point(62,140, 1),
Point(62,123, 1),
Point(34,164, 1),
Point(19,154, 1),
Point(37,165, 1),
Point(44,170, 1),
Point(25,181, 1),
Point(14,174, 1),
Point(40,184, 1),
Point(42,184, 1),
Point(20,199, 1),
Point(11,193, 1),
Point(35,200, 1),
Point(38,200, 1),
Point(16,217, 1),
Point(10,212, 1),
Point(28,213, 1),
Point(33,214, 1),
Point(69,222, 1),
Point(76,196, 1),
Point(70,164, 1),
Point(62,141, 1),
Point(62,124, 1),
Point(35,165, 1),
Point(20,155, 1),
Point(37,166, 1),
Point(46,170, 1),
Point(26,182, 1),
Point(14,174, 1),
Point(39,184, 1),
Point(44,185, 1),
Point(21,200, 1),
Point(11,193, 1),
Point(36,200, 1),
Point(40,201, 1),
Point(17,218, 1),
Point(10,212, 1),
Point(29,214, 1),
Point(35,215, 1),
Point(71,223, 1),
Point(77,196, 1),
Point(70,164, 1),
Point(62,140, 1),
Point(62,123, 1),
Point(35,165, 1),
Point(20,155, 1),
Point(38,166, 1),
Point(46,171, 1),
Point(26,182, 1),
Point(16,174, 1),
Point(41,184, 1),
Point(44,185, 1),
Point(21,199, 1),
Point(12,193, 1),
Point(36,200, 1),
Point(40,201, 1),
Point(17,217, 1),
Point(11,212, 1),
Point(30,213, 1),
Point(35,214, 1),
Point(72,223, 1),
Point(78,196, 1),
Point(71,165, 1),
Point(63,141, 1),
Point(63,124, 1),
Point(36,166, 1),
Point(21,156, 1),
Point(39,167, 1),
Point(47,171, 1),
Point(27,183, 1),
Point(16,175, 1),
Point(41,185, 1),
Point(45,186, 1),
Point(22,201, 1),
Point(13,194, 1),
Point(37,200, 1),
Point(41,201, 1),
Point(18,219, 1),
Point(11,212, 1),
Point(29,214, 1),
Point(36,215, 1),
Point(73,224, 1),
Point(79,197, 1),
Point(72,166, 1),
Point(65,142, 1),
Point(64,125, 1),
Point(37,166, 1),
Point(23,157, 1),
Point(40,167, 1),
Point(47,171, 1),
Point(27,184, 1),
Point(17,176, 1),
Point(42,186, 1),
Point(44,186, 1),
Point(22,201, 1),
Point(14,195, 1),
Point(38,202, 1),
Point(41,202, 1),
Point(18,219, 1),
Point(12,214, 1),
Point(31,216, 1),
Point(36,216, 1),
Point(74,226, 1),
Point(80,198, 1),
Point(74,167, 1),
Point(66,144, 1),
Point(66,127, 1),
Point(39,168, 1),
Point(24,158, 1),
Point(42,169, 1),
Point(49,173, 1),
Point(30,185, 1),
Point(19,177, 1),
Point(44,187, 1),
Point(47,188, 1),
Point(24,203, 1),
Point(15,196, 1),
Point(39,203, 1),
Point(44,203, 1),
Point(21,221, 1),
Point(14,215, 1),
Point(33,217, 1),
Point(39,217, 1),
])
recognizer = Recognizer([DOWN,UP])



recognizer_hand = Recognizer([Left_Hand_Up,Right_Hand_UP])
from BT import BluetoothScanner
import cv2
import mediapipe as mp
import socket
import time
import threading

# Initialize MediaPipe modules
mp_drawing = mp.solutions.drawing_utils
mp_pose = mp.solutions.pose
mp_hands = mp.solutions.hands

# Initialize pose and hands detectors
pose = mp_pose.Pose(min_detection_confidence=0.5, min_tracking_confidence=0.5)
hands = mp_hands.Hands(min_detection_confidence=0.7, min_tracking_confidence=0.7)

gest = {
    "1": 1,
    "2": 2,
    "3": 3,
    "4": 4,
    "5": 5,
    "DOWN": 6,
    "UP": 7,
    "Left_Hand_Up": 8,
    "Right_Hand_UP": 9,
}

# Initialize live gesture data and socket connection
live_gest = [-1, -1, -1]
mySocket = socket.socket()
mySocket.bind(('localhost', 5000))
mySocket.listen(5)
print("Waiting for a client to connect...")

conn, addr = mySocket.accept()
print(f"Device connected from {addr}")

# Open the webcam
cap = cv2.VideoCapture(0)
framecnt = 0
Allpoints = []
value = 0
hand_value = 0
hand_points = []
num_fingers=0
device_address=0
data = ""  # Initialize data to be sent

# Function to count fingers
def count_fingers(hand_landmarks):
    thumb = 1 if hand_landmarks[4].x < hand_landmarks[3].x else 0
    index = 1 if hand_landmarks[8].y < hand_landmarks[6].y else 0
    middle = 1 if hand_landmarks[12].y < hand_landmarks[10].y else 0
    ring = 1 if hand_landmarks[16].y < hand_landmarks[14].y else 0
    pinky = 1 if hand_landmarks[20].y < hand_landmarks[18].y else 0
    return thumb + index + middle + ring + pinky

# Thread function for sending data
def send_data():
    global data
    while True:
        data = f"{hand_value},{value},{num_fingers},{device_address}"
        conn.send(data.encode('utf-8'))
        time.sleep(1)  # Reduced for continuous data flow

# Thread function to handle Bluetooth scanning
def get_BT():
    global device_address
    scanner = BluetoothScanner()
    scanner.run()  # Start the Bluetooth scanning

    device_address = scanner.get_device_address()  # Retrieve the device address
    if device_address:
        print(f"Found device address: {device_address}")
    else:
        print("No target device found.")

# Start Bluetooth scanning in a separate thread
receive_BT = threading.Thread(target=get_BT)
receive_BT.start()

# Start data sending in a separate thread
send_thread = threading.Thread(target=send_data)
send_thread.start()

# Main loop for gesture recognition
while cap.isOpened():
    ret, frame = cap.read()
    if not ret:
        print("Can't receive frame (stream end?). Exiting ...")
        break

    frame = cv2.resize(frame, (480, 320))
    frame = cv2.flip(frame, 1)  # Flip the frame horizontally for a mirrored view
    framecnt += 1

    # Convert the frame to RGB format for processing
    RGB = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)

    # Process the frame with pose and hand detection
    pose_results = pose.process(RGB)
    hand_results = hands.process(RGB)

    try:
        # Initialize variables for gesture recognition
        gesture_key = None
        num_fingers = 0

        # Collect points for pose landmarks
        if pose_results.pose_landmarks:
            image_height, image_width, _ = frame.shape
            x_right_wrist = int(pose_results.pose_landmarks.landmark[mp_pose.PoseLandmark.RIGHT_WRIST].x * image_width)
            y_right_wrist = int(pose_results.pose_landmarks.landmark[mp_pose.PoseLandmark.RIGHT_WRIST].y * image_height)
            Allpoints.append(Point(x_right_wrist, y_right_wrist, 1))

            x_left_wrist = int(pose_results.pose_landmarks.landmark[mp_pose.PoseLandmark.LEFT_WRIST].x * image_width)
            y_left_wrist = int(pose_results.pose_landmarks.landmark[mp_pose.PoseLandmark.LEFT_WRIST].y * image_height)
            Allpoints.append(Point(x_left_wrist, y_left_wrist, 1))

            if hand_results.multi_hand_landmarks:
                for hand_landmarks in hand_results.multi_hand_landmarks:
                    for i in range(21):
                        x_thumb = int(hand_landmarks.landmark[i].x * image_width)
                        y_thumb = int(hand_landmarks.landmark[i].y * image_height)
                        hand_points.append(Point(x_thumb, y_thumb, 1))

            mp_drawing.draw_landmarks(frame, pose_results.pose_landmarks, mp_pose.POSE_CONNECTIONS)

            # Recognize gestures every 30 frames
            if framecnt % 30 == 0:
                framecnt = 0
                all_result = recognizer_hand.recognize(Allpoints)
                hand_result = recognizer.recognize(hand_points)

                if all_result[0] in gest:
                    value = str(gest[all_result[0]])

                if hand_result[0] in gest:
                    hand_value = str(6) if hand_result[1] < 0.1 else str(gest[hand_result[0]])

                # Prepare data for sending and clear points
                
                Allpoints.clear()
                hand_points.clear()

        if hand_results.multi_hand_landmarks:
            for hand_landmarks in hand_results.multi_hand_landmarks:
                mp_drawing.draw_landmarks(frame, hand_landmarks, mp_hands.HAND_CONNECTIONS)
                num_fingers = count_fingers(hand_landmarks.landmark)
                num_fingers = 3 if num_fingers >= 3 else num_fingers
                cv2.putText(frame, f'Fingers: {num_fingers}', (10, 50), cv2.FONT_HERSHEY_SIMPLEX, 1, (255, 0, 0), 2, cv2.LINE_AA)

        # Display the frame
        cv2.imshow('Gesture & Finger Counter', frame)

    except Exception as e:
        print('Error:', e)

    if cv2.waitKey(1) & 0xFF == ord('q'):
        break

# Cleanup resources
cap.release()
cv2.destroyAllWindows()
conn.close()
mySocket.close()
